<!DOCTYPE html>
<html>
<head>
  <title>W-2 vs 1099 Calculator (All 50 States)</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1100px; margin: 0 auto; padding: 20px; }
    input, select, button { font-size: 16px; padding: 8px; width: 100%; margin-bottom: 10px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
    th { background: #f4f4f4; cursor: pointer; }
    tr:hover { background-color: #f0f8ff; }
    tr.data-row { cursor: pointer; }
    .controls { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
    .col-breakdown { background: #eef7ff; font-size: 13px; text-align: left; display: none; }
    .info, .footer, .disclaimer {
      font-size: 13px; margin-top: 20px; padding: 10px;
    }
    .disclaimer { background: #fff3cd; border: 1px solid #ffeeba; color: #856404; }
    .info { background: #f9f9f9; border-left: 4px solid #ccc; }
    .footer { color: #555; text-align: center; border-top: 1px solid #ccc; }
    #grossDisplay { font-weight: bold; font-size: 16px; margin-top: 10px; }
  </style>
</head>
<body>

<div class="disclaimer">
  <strong>Disclaimer:</strong> This calculator provides estimates only. Always consult a tax professional for personalized advice.
</div>

<h2>W-2 vs 1099 Calculator (Tax Brackets + COL + CTC for All 50 States)</h2>

<label>Gross Hourly Rate ($):</label>
<input type="number" id="rate" value="30">
<label>Hours per Week:</label>
<input type="number" id="hours" value="40">
<label>Weeks per Year:</label>
<input type="number" id="weeks" value="52">
<label>Filing Status:</label>
<select id="filingStatus">
  <option value="Single">Single</option>
  <option value="Married Joint">Married Filing Jointly</option>
  <option value="Married Separate">Married Filing Separately</option>
</select>
<label>Qualifying Children (for Child Tax Credit):</label>
<input type="number" id="children" value="0">

<h3>1099 Only:</h3>
<label>Work Miles per Week:</label>
<input type="number" id="miles" value="25">
<label>Other 1099 Business Deductions (Annual $):</label>
<input type="number" id="otherDeductions" value="2000">
<hr>
<label>Select State(s):</label>
<select id="stateSelect" multiple size="10"></select>

<div class="controls">
  <button onclick="calculate()">Calculate</button>
</div>

<div id="grossDisplay"></div>
<div id="results"></div>

<script>
const states = [
  "Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "Florida",
  "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine",
  "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska",
  "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio",
  "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas",
  "Utah", "Vermont", "Virginia", "Washington", "West Virginia", "Wisconsin", "Wyoming"
];
document.getElementById("stateSelect").innerHTML = states.map(s => `<option value="${s}">${s}</option>`).join("");

const colBreakdown = {
  "California": [2400, 450, 320, 500, 300],
  "Texas": [1300, 370, 270, 450, 230],
  "New York": [2300, 440, 320, 500, 290],
  "Florida": [1500, 380, 270, 460, 240],
  "Ohio": [1000, 330, 250, 430, 200]
};

let resultRows = [];

function calcTax(income, children = 0) {
  let tax = 0;
  if (income <= 11600) tax = income * 0.10;
  else if (income <= 47150) tax = 1160 + (income - 11600) * 0.12;
  else if (income <= 100525) tax = 5426 + (income - 47150) * 0.22;
  else tax = 15513 + (income - 100525) * 0.24;
  return Math.max(0, tax - Math.min(tax, children * 2000));
}

function toggleRow(row) {
  const next = row.nextElementSibling;
  if (next && next.classList.contains("col-breakdown")) {
    next.style.display = next.style.display === "none" ? "table-row" : "none";
  }
}

function sortByColumn(index) {
  const table = document.querySelector("#resultTable tbody");
  const rows = Array.from(table.querySelectorAll("tr"));
  const pairedRows = [];

  for (let i = 0; i < rows.length; i += 2) {
    pairedRows.push([rows[i], rows[i + 1]]);
  }

  pairedRows.sort((a, b) => {
    const aText = a[0].cells[index].textContent.replace(/[^0-9.-]/g, "");
    const bText = b[0].cells[index].textContent.replace(/[^0-9.-]/g, "");
    const aVal = parseFloat(aText) || 0;
    const bVal = parseFloat(bText) || 0;
    return bVal - aVal;
  });

  table.innerHTML = "";
  pairedRows.forEach(([data, breakdown]) => {
    table.appendChild(data);
    table.appendChild(breakdown);
  });
}

function calculate() {
  const rate = parseFloat(document.getElementById("rate").value);
  const hours = parseFloat(document.getElementById("hours").value);
  const weeks = parseFloat(document.getElementById("weeks").value);
  const children = parseInt(document.getElementById("children").value);
  const miles = parseFloat(document.getElementById("miles").value);
  const other = parseFloat(document.getElementById("otherDeductions").value);
  const selectedStates = Array.from(document.getElementById("stateSelect").selectedOptions).map(o => o.value);

  const totalHours = hours * weeks;
  const gross = rate * totalHours;
  const mileageDeduction = miles * weeks * 0.67;
  const totalDeductions = mileageDeduction + other;
  const adjIncome = Math.max(0, gross - totalDeductions);

  document.getElementById("grossDisplay").innerText = `Total Gross Income: $${gross.toLocaleString()}`;

  resultRows = [];

  selectedStates.forEach(state => {
    const [h=1000,f=350,t=250,hc=440,m=220] = colBreakdown[state] || [1000,350,250,440,220];
    const totalCOL = h + f + t + hc + m;
    const annualCOL = totalCOL * 12;

    const w2Tax = calcTax(gross, children) + gross * 0.0765;
    const w2Net = gross - w2Tax;
    const w2Hr = w2Net / totalHours;
    const w2Adj = w2Net - annualCOL;

    const selfTax = calcTax(adjIncome, children) + adjIncome * 0.153;
    const selfNet = adjIncome - selfTax;
    const selfHr = selfNet / totalHours;
    const selfAdj = selfNet - annualCOL;

    const better = selfAdj > w2Adj ? "1099" : "W-2";

    resultRows.push({
      state, totalCOL, w2Tax, w2Net, w2Hr, selfTax, adjIncome,
      selfNet, selfHr, w2Adj, selfAdj, better, breakdown: [h,f,t,hc,m], annualCOL
    });
  });

  renderTable();
}

function renderTable() {
  let html = `<p><em>Click a row to expand COL details. Click a column header to sort.</em></p>
  <table id="resultTable"><thead><tr>
    <th onclick="sortByColumn(0)">State</th><th onclick="sortByColumn(1)">C.O.L.</th><th onclick="sortByColumn(2)">W-2 Tax</th>
    <th onclick="sortByColumn(3)">W-2 Net</th><th onclick="sortByColumn(4)">W-2/hr</th><th onclick="sortByColumn(5)">1099 Tax</th>
    <th onclick="sortByColumn(6)">Adj Income</th><th onclick="sortByColumn(7)">1099 Net</th><th onclick="sortByColumn(8)">1099/hr</th>
    <th onclick="sortByColumn(9)">W-2 COL Adj</th><th onclick="sortByColumn(10)">1099 COL Adj</th><th onclick="sortByColumn(11)">Better</th>
  </tr></thead><tbody>`;

  resultRows.forEach(r => {
    html += `
    <tr class="data-row" onclick="toggleRow(this)">
      <td>${r.state}</td><td>$${r.totalCOL}</td><td>$${r.w2Tax.toFixed(2)}</td><td>$${r.w2Net.toFixed(2)}</td>
      <td>$${r.w2Hr.toFixed(2)}</td><td>$${r.selfTax.toFixed(2)}</td><td>$${r.adjIncome.toFixed(2)}</td>
      <td>$${r.selfNet.toFixed(2)}</td><td>$${r.selfHr.toFixed(2)}</td><td>$${r.w2Adj.toFixed(2)}</td>
      <td>$${r.selfAdj.toFixed(2)}</td><td><strong>${r.better}</strong></td>
    </tr>
    <tr class="col-breakdown">
      <td colspan="12">
        <strong>${r.state} Monthly COL:</strong><br>
        üè† $${r.breakdown[0]} | üõí $${r.breakdown[1]} | üöó $${r.breakdown[2]} | ü©∫ $${r.breakdown[3]} | üéØ $${r.breakdown[4]}<br>
        <strong>Total Monthly:</strong> $${r.totalCOL} √ó 12 = <strong>$${r.annualCOL}</strong>
      </td>
    </tr>`;
  });

  html += "</tbody></table>";
  document.getElementById("results").innerHTML = html;
}
</script>

<div class="info">
  <strong>Table Definitions:</strong><br>
  W-2 Tax: Estimated federal, state, and FICA taxes for W-2 employees<br>
  W-2 Net: Net pay after taxes for W-2 employees<br>
  1099 Tax: Estimated federal, state, and self-employment tax for 1099 workers (after deductions)<br>
  Adj Income: Adjusted gross income for 1099 after deductions (mileage + business expenses)<br>
  COL Adj: Net income adjusted for cost-of-living index (COL)<br>
  Better: Higher COL-adjusted net income between W-2 and 1099
</div>

<div class="footer">
  You may share, copy, or adapt this calculator freely for personal or educational use.<br>
  Please credit the original author where possible. Respect the work ‚Äî don‚Äôt remove attribution.<br>
  &copy; 2025 Dinh Han, CodeCrafter. All rights reserved.
</div>

</body>
</html>
